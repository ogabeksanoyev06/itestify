import{_ as E}from"./index.C47UTDiz.js";import{b as P,u as z,a as D}from"./entry.ZVZ_3oFo.js";import{t as m}from"./testService.BAeGR1DA.js";import{t as g}from"./test.DmJ8w_Fl.js";import{a as u,o as V,H as l,R as a,V as d,F as h,I as x,m as b,M as v,U as _,G as i,O as Y,L as $,u as Q}from"./swiper-vue.Cb-HU16S.js";import"./api.BrGyU9uH.js";const R=window.setInterval,S={class:"py-8"},G={class:"sm:container"},K={class:"flex flex-col gap-4"},U={class:"flex justify-center items-center flex-col md:!flex-row md:!justify-between gap-2 p-4 shadow-[rgba(0,0,0,0.16)_0px_1px_4px]"},J={class:"text-base font-bold text-center"},W={class:"max-w-[150px] w-full text-center text-2xl rounded p-1 bg-green-100 text-primary"},X={class:"flex flex-col"},Z={id:"question",class:"flex items-start space-x-1 mb-4"},ee={id:"question_number",class:"text-sm font-bold"},te=["innerHTML"],se={id:"answers",class:"flex flex-col gap-2"},ae=["onClick"],re={class:"font-semibold"},ne=["innerHTML"],oe={class:"p-4 shadow-[rgba(0,0,0,0.16)_0px_1px_4px]"},ie={class:"pagination-list flex flex-wrap gap-2 justify-center border-b pb-4"},le={class:"flex flex-col justify-center items-center gap-4 sm:justify-between sm:flex-row pt-4"},ce={class:"flex flex-wrap gap-4"},he={__name:"test",setup(ue){const k=P(),N=z(),w=u(!1),{$toast:c}=D(),C=u(["A","B","C","D","E","F","G","H"]),o=u({}),f=u(0),L=u(1);function I(){let e=R(function(){if(f.value<=0){y(),console.log("sasasasas"),clearInterval(e);return}f.value--},1e3)}function B(e){let t=parseInt(e,10),s=Math.floor(t/3600),r=Math.floor((t-s*3600)/60),n=t-s*3600-r*60;return s<10&&(s="0"+s),r<10&&(r="0"+r),n<10&&(n="0"+n),s+":"+r+":"+n}function F(e){o.value={subjectName:e.name,questionBall:e.ball,questionCount:e.questions.length,type:e.type,startedTime:e.time_interval.started_time,finishAt:e.time_interval.finish_at,testId:e.time_interval.id,questions:e.questions.map(t=>({id:t.id,question:t.question,answers:[t.answer1,t.answer2,t.answer3,t.answer4],correctAnswer:t.correct_answer,isPicked:t.is_picked,answer:t.answer}))}}function M(e){o.value=e}function j(e){o.value=e}function A(e){k.push({path:"/test",query:{testNumber:e}}),L.value=e}function y(){try{const e=m.scienseTestDone({question_id:191,total_result_id:o.value.testId,picked:!0,finishing:!0});console.log(e)}catch(e){console.log(e.response)}}async function H(e,t){try{const s=await m.scienseTestDone({question_id:Number(e),total_result_id:o.value.testId,answer:t,picked:!0,finishing:!1});s.code===200&&c.success(s.message)}catch(s){c.error(s.response.data.message)}}async function O(){try{const e=await m.getTestLiveTime({test_type:o.value.type,test_id:o.value.testId});e.code===200&&(c.success(e.message),f.value=e.data.left_time*60)}catch(e){c.error(e.response.data.message)}finally{}}async function q(){w.value=!0;try{const e=await m.activeTests();switch(e.type){case g.TYPE_BLOCK:F(e);break;case g.TYPE_SCHOOL:M(e);break;case g.TYPE_ONLINE:j(e);break;default:break}}catch(e){c.error(e.response.data.message)}finally{w.value=!1}}return V(async()=>{await q(),await O(),I()}),(e,t)=>{const s=E;return i(),l("div",S,[a("div",G,[a("div",K,[a("div",U,[a("span",J,d(o.value.subjectName),1),a("span",W,d(B(f.value)),1)]),(i(!0),l(h,null,x(o.value.questions,(r,n)=>(i(),l("div",{class:"px-4 py-8 shadow-[rgba(0,0,0,0.16)_0px_1px_4px]",key:n},[a("div",X,[a("div",Z,[a("span",ee,d(n+1)+".",1),a("span",{id:"question_text",class:"text-sm",innerHTML:r.question},null,8,te)]),a("ul",se,[(i(!0),l(h,null,x(r.answers,(T,p)=>(i(),l("li",{class:Y(["text-sm cursor-pointer border border-border rounded flex items-start gap-1 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-300 group",{"border-primary text-primary":r.isPicked&&r.answer===p+1}]),key:p,onClick:de=>H(r.id,p+1)},[a("span",re,d(C.value[p]+")"),1),a("span",{class:"",innerHTML:T},null,8,ne)],10,ae))),128))])])]))),128)),a("div",oe,[a("ul",ie,[(i(!0),l(h,null,x(o.value.questionCount,(r,n)=>(i(),$(s,{variant:parseInt(Q(N).query.testNumber)===n+1?"default":"outline",key:r.id,onClick:T=>A(n+1),class:"w-8 h-8"},{default:v(()=>[_(d(n+1),1)]),_:2},1032,["variant","onClick"]))),128))]),a("div",le,[a("div",ce,[b(s,{size:"lg"},{default:v(()=>[_("Orqaga")]),_:1}),_(),b(s,{size:"lg"},{default:v(()=>[_("Oldinga")]),_:1})]),b(s,{size:"lg",variant:"danger",class:"bg-red-500",onClick:y},{default:v(()=>[_("Yakunlash")]),_:1})])])])])])}}};export{he as default};
