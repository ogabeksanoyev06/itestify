import{u as E}from"./useApi.BoEt07ES.js";import{b as I,c as R}from"./entry.DdJuc-3z.js";import{a as o}from"./swiper-vue.DvdnvJXd.js";const N=()=>{const t=E(),l=I(),r=o(!1),i=o(!1),{$toast:a}=R(),p=o([]),u=o([]),h=o([]),f=o([]),y=o([]),v=o([]),g=o([]),d=async e=>{try{const s=await t.get("tests/sciences/",{params:e});p.value=s}catch(s){console.error("Error geting sciences:",s)}},T=async e=>{try{const s=await t.get(`tests/subjects/?science_id=${e}`);u.value=s}catch(s){console.error("Error geting subjects:",s)}},w=async e=>{try{const s=await t.get("tests/classes/",e);h.value=s}catch(s){console.error("Error geting classes:",s)}},m=async e=>{r.value=!0;try{const s=e?`tests/test-types/?category_type=${e}`:"tests/test-types/",n=await t.get(s);f.value=n}catch(s){console.error("Error geting test types:",s)}finally{r.value=!1}};return{sciences:p,subjects:u,classes:h,testTypes:f,testHistory:y,examTests:v,researches:g,loading:r,boughtLoading:i,getSciences:d,getSubjects:T,getClasses:w,getTestTypes:m,getTestHistory:async e=>{r.value=!0;try{const s=await t.get("tests/tests-history/",{params:e});y.value=s}catch(s){console.error("Error geting test history:",s)}finally{r.value=!1}},getTestHistoryById:async e=>{try{const s=await t.get(`tests/tests-history/${e.id}/?type=${e.type}`);y.value=s}catch(s){console.error("Error geting test history by ID:",s)}},getResearches:async e=>{try{const s=await t.get("tests/researches/",{params:e});g.value=s}catch(s){console.error("Error geting researches:",s)}},getResearchById:async e=>{try{const s=await t.get(`tests/researches/${e}/`);g.value=s}catch(s){console.error("Error geting research by ID:",s)}},buyExams:async(e,s)=>{var n;i.value=!0;try{const c=await t.post("tests/buy-exams/",{test_type:e});c.code===200&&(a.success(c.message),m(s))}catch(c){(n=c.response.data.message.non_field_errors)==null||n.forEach(b=>{a.error(b)}),a.error(c.response.data.message)}finally{i.value=!1}},startSchoolTest:async e=>{r.value=!0;try{const s=await t.post("tests/school-tests/start/",e);parseInt(s.code)===500?a.error(s.message):l.push({path:"/test"})}catch(s){a.error(s.response.data.message)}finally{r.value=!1}},startSciencesTest:async e=>{r.value=!0;try{const s=await t.post("tests/sciences-tests/start/",e);parseInt(s.code)===500?a.error(s.message):l.push({path:"/test"})}catch(s){a.error(s.response.data.message),console.log(s.response)}finally{r.value=!1}},startResearchesTest:async e=>{r.value=!0;try{const s=await t.post("tests/researches/test/start/",e);parseInt(s.code)===500?a.error(s.message):l.push({path:"/test"})}catch(s){a.error(s.response.data.message)}finally{r.value=!1}}}};export{N as u};
